import { safeLocalStorage, CLIENT_LS_KEYS } from "@scalar/helpers/object/local-storage";
import { emitCustomEvent } from "@scalar/workspace-store/events";
const updateScheme = (uid, path, value, { securitySchemes }, el, persistAuth = false) => {
  emitCustomEvent(el, "scalar-edit-security-scheme", {
    uid,
    path,
    value
  });
  if (!persistAuth) {
    return;
  }
  try {
    const auth = JSON.parse(safeLocalStorage().getItem(CLIENT_LS_KEYS.AUTH) ?? "{}");
    const scheme = securitySchemes[uid];
    if (auth && scheme?.nameKey) {
      const nameScheme = auth[scheme.nameKey] ||= {};
      nameScheme[path] = value;
      safeLocalStorage().setItem(CLIENT_LS_KEYS.AUTH, JSON.stringify(auth));
    }
  } catch (e) {
    console.error(e);
  }
};
export {
  updateScheme
};
