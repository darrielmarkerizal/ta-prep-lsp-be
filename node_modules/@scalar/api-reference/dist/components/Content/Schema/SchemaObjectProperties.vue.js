import { defineComponent, computed, createElementBlock, openBlock, Fragment, createCommentVNode, createBlock, unref, renderList } from "vue";
import { getResolvedRef } from "@scalar/workspace-store/helpers/get-resolved-ref";
import { isTypeObject } from "./helpers/is-type-object.js";
import { sortPropertyNames } from "./helpers/sort-property-names.js";
import SchemaProperty from "./SchemaProperty.vue.js";
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "SchemaObjectProperties",
  props: {
    schema: {},
    discriminator: {},
    compact: { type: Boolean },
    hideHeading: { type: Boolean },
    level: {},
    hideModelNames: { type: Boolean },
    breadcrumb: {},
    eventBus: {},
    options: {}
  },
  setup(__props) {
    const sortedProperties = computed(
      () => sortPropertyNames(__props.schema, __props.discriminator, __props.options)
    );
    const getAdditionalPropertiesName = (_additionalProperties) => {
      const additionalProperties = getResolvedRef(_additionalProperties);
      if (typeof additionalProperties === "object" && typeof additionalProperties["x-additionalPropertiesName"] === "string" && additionalProperties["x-additionalPropertiesName"].trim().length > 0) {
        return `${additionalProperties["x-additionalPropertiesName"].trim()}`;
      }
      return "propertyName";
    };
    const getAdditionalPropertiesValue = (additionalProperties) => {
      if (additionalProperties === true || typeof additionalProperties === "object" && Object.keys(additionalProperties).length === 0 || typeof additionalProperties !== "object" || !("type" in additionalProperties)) {
        return {
          // @ts-expect-error - ask hans
          type: "anything",
          ...typeof additionalProperties === "object" ? additionalProperties : {}
        };
      }
      return additionalProperties;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock(Fragment, null, [
        unref(isTypeObject)(_ctx.schema) && _ctx.schema.properties ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(sortedProperties.value, (property) => {
          return openBlock(), createBlock(SchemaProperty, {
            key: property,
            breadcrumb: _ctx.breadcrumb,
            compact: _ctx.compact,
            discriminator: _ctx.discriminator,
            eventBus: _ctx.eventBus,
            hideHeading: _ctx.hideHeading,
            hideModelNames: _ctx.hideModelNames,
            level: _ctx.level,
            name: property,
            options: _ctx.options,
            required: _ctx.schema.required?.includes(property),
            schema: unref(getResolvedRef)(_ctx.schema.properties[property])
          }, null, 8, ["breadcrumb", "compact", "discriminator", "eventBus", "hideHeading", "hideModelNames", "level", "name", "options", "required", "schema"]);
        }), 128)) : createCommentVNode("", true),
        unref(isTypeObject)(_ctx.schema) && _ctx.schema.patternProperties ? (openBlock(true), createElementBlock(Fragment, { key: 1 }, renderList(Object.entries(_ctx.schema.patternProperties), ([key, property]) => {
          return openBlock(), createBlock(SchemaProperty, {
            key,
            breadcrumb: _ctx.breadcrumb,
            compact: _ctx.compact,
            discriminator: _ctx.discriminator,
            eventBus: _ctx.eventBus,
            hideHeading: _ctx.hideHeading,
            hideModelNames: _ctx.hideModelNames,
            level: _ctx.level,
            name: key,
            options: _ctx.options,
            schema: unref(getResolvedRef)(property)
          }, null, 8, ["breadcrumb", "compact", "discriminator", "eventBus", "hideHeading", "hideModelNames", "level", "name", "options", "schema"]);
        }), 128)) : createCommentVNode("", true),
        unref(isTypeObject)(_ctx.schema) && _ctx.schema.additionalProperties ? (openBlock(), createBlock(SchemaProperty, {
          key: 2,
          breadcrumb: _ctx.breadcrumb,
          compact: _ctx.compact,
          discriminator: _ctx.discriminator,
          eventBus: _ctx.eventBus,
          hideHeading: _ctx.hideHeading,
          hideModelNames: _ctx.hideModelNames,
          level: _ctx.level,
          name: getAdditionalPropertiesName(_ctx.schema.additionalProperties),
          noncollapsible: "",
          options: _ctx.options,
          schema: getAdditionalPropertiesValue(_ctx.schema.additionalProperties),
          variant: "additionalProperties"
        }, null, 8, ["breadcrumb", "compact", "discriminator", "eventBus", "hideHeading", "hideModelNames", "level", "name", "options", "schema"])) : createCommentVNode("", true)
      ], 64);
    };
  }
});
export {
  _sfc_main as default
};
