{
  "version": 3,
  "sources": ["../../src/helpers/serverHelpers.ts"],
  "sourcesContent": ["import type { OpenAPIV3_1 } from '@scalar/openapi-types'\n\nimport type { Item, ItemGroup, PostmanCollection } from '../types'\n\n/**\n * Recursively processes collection items to extract server URLs\n */\nfunction processItems(items: (Item | ItemGroup)[], domains: Set<string>) {\n  items.forEach((item) => {\n    if ('item' in item && Array.isArray(item.item)) {\n      processItems(item.item, domains)\n    } else if ('request' in item) {\n      const request = item.request\n      if (typeof request !== 'string') {\n        const url = typeof request.url === 'string' ? request.url : request.url?.raw\n\n        if (url) {\n          try {\n            // Extract domain from URL\n            const urlMatch = url.match(/^(?:https?:\\/\\/)?([^/?#]+)/i)\n            if (urlMatch?.[1]) {\n              // Ensure we have the protocol\n              const serverUrl = urlMatch[1].startsWith('http')\n                ? urlMatch[1].replace(/\\/$/, '')\n                : `https://${urlMatch[1]}`.replace(/\\/$/, '')\n              domains.add(serverUrl)\n            }\n          } catch (error) {\n            console.error(`Error extracting domain from URL \"${url}\":`, error)\n          }\n        }\n      }\n    }\n  })\n}\n\n/**\n * Parses a Postman collection to extract unique server URLs.\n */\nexport function parseServers(postmanCollection: PostmanCollection): OpenAPIV3_1.ServerObject[] {\n  const domains = new Set<string>()\n\n  if (postmanCollection.item && Array.isArray(postmanCollection.item)) {\n    processItems(postmanCollection.item, domains)\n  }\n\n  return Array.from(domains).map((domain) => ({\n    url: domain,\n  }))\n}\n"],
  "mappings": "AAOA,SAAS,aAAa,OAA6B,SAAsB;AACvE,QAAM,QAAQ,CAAC,SAAS;AACtB,QAAI,UAAU,QAAQ,MAAM,QAAQ,KAAK,IAAI,GAAG;AAC9C,mBAAa,KAAK,MAAM,OAAO;AAAA,IACjC,WAAW,aAAa,MAAM;AAC5B,YAAM,UAAU,KAAK;AACrB,UAAI,OAAO,YAAY,UAAU;AAC/B,cAAM,MAAM,OAAO,QAAQ,QAAQ,WAAW,QAAQ,MAAM,QAAQ,KAAK;AAEzE,YAAI,KAAK;AACP,cAAI;AAEF,kBAAM,WAAW,IAAI,MAAM,6BAA6B;AACxD,gBAAI,WAAW,CAAC,GAAG;AAEjB,oBAAM,YAAY,SAAS,CAAC,EAAE,WAAW,MAAM,IAC3C,SAAS,CAAC,EAAE,QAAQ,OAAO,EAAE,IAC7B,WAAW,SAAS,CAAC,CAAC,GAAG,QAAQ,OAAO,EAAE;AAC9C,sBAAQ,IAAI,SAAS;AAAA,YACvB;AAAA,UACF,SAAS,OAAO;AACd,oBAAQ,MAAM,qCAAqC,GAAG,MAAM,KAAK;AAAA,UACnE;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAKO,SAAS,aAAa,mBAAkE;AAC7F,QAAM,UAAU,oBAAI,IAAY;AAEhC,MAAI,kBAAkB,QAAQ,MAAM,QAAQ,kBAAkB,IAAI,GAAG;AACnE,iBAAa,kBAAkB,MAAM,OAAO;AAAA,EAC9C;AAEA,SAAO,MAAM,KAAK,OAAO,EAAE,IAAI,CAAC,YAAY;AAAA,IAC1C,KAAK;AAAA,EACP,EAAE;AACJ;",
  "names": []
}
