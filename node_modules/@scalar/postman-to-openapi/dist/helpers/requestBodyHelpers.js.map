{
  "version": 3,
  "sources": ["../../src/helpers/requestBodyHelpers.ts"],
  "sourcesContent": ["import type { OpenAPIV3_1 } from '@scalar/openapi-types'\n\nimport type { FormParameter, RequestBody, UrlEncodedParameter } from '../types'\nimport { processFormDataSchema } from './formDataHelpers'\nimport { createParameterObject } from './parameterHelpers'\n\n/**\n * Extracts and converts the request body from a Postman request to an OpenAPI RequestBodyObject.\n * Handles raw JSON, form-data, and URL-encoded body types, creating appropriate schemas and content types.\n */\nexport function extractRequestBody(body: RequestBody): OpenAPIV3_1.RequestBodyObject {\n  const requestBody: OpenAPIV3_1.RequestBodyObject = {\n    content: {},\n  }\n\n  if (body.mode === 'raw') {\n    handleRawBody(body, requestBody)\n    return requestBody\n  }\n\n  if (body.mode === 'formdata' && body.formdata) {\n    handleFormDataBody(body.formdata, requestBody)\n    return requestBody\n  }\n\n  if (body.mode === 'urlencoded' && body.urlencoded) {\n    handleUrlEncodedBody(body.urlencoded, requestBody)\n    return requestBody\n  }\n\n  return requestBody\n}\n\nfunction handleRawBody(body: RequestBody, requestBody: OpenAPIV3_1.RequestBodyObject) {\n  try {\n    const jsonBody = JSON.parse(body.raw || '')\n    requestBody.content = {\n      'application/json': {\n        schema: {\n          type: 'object',\n          example: jsonBody,\n        },\n      },\n    }\n  } catch (_error) {\n    requestBody.content = {\n      'text/plain': {\n        schema: {\n          type: 'string',\n          examples: [body.raw],\n        },\n      },\n    }\n  }\n}\n\nfunction handleFormDataBody(formdata: FormParameter[], requestBody: OpenAPIV3_1.RequestBodyObject) {\n  requestBody.content = {\n    'multipart/form-data': {\n      schema: processFormDataSchema(formdata),\n    },\n  }\n}\n\nfunction handleUrlEncodedBody(urlencoded: UrlEncodedParameter[], requestBody: OpenAPIV3_1.RequestBodyObject) {\n  const schema: OpenAPIV3_1.SchemaObject = {\n    type: 'object',\n    properties: {},\n    required: [],\n  }\n  urlencoded.forEach((item: UrlEncodedParameter) => {\n    if (schema.properties) {\n      const paramObject = createParameterObject(item, 'query')\n      schema.properties[item.key] = {\n        type: 'string',\n        examples: [item.value],\n        description: paramObject.description,\n      }\n      if (paramObject.required) {\n        schema.required?.push(item.key)\n      }\n    }\n  })\n  requestBody.content = {\n    'application/x-www-form-urlencoded': {\n      schema,\n    },\n  }\n}\n"],
  "mappings": "AAGA,SAAS,6BAA6B;AACtC,SAAS,6BAA6B;AAM/B,SAAS,mBAAmB,MAAkD;AACnF,QAAM,cAA6C;AAAA,IACjD,SAAS,CAAC;AAAA,EACZ;AAEA,MAAI,KAAK,SAAS,OAAO;AACvB,kBAAc,MAAM,WAAW;AAC/B,WAAO;AAAA,EACT;AAEA,MAAI,KAAK,SAAS,cAAc,KAAK,UAAU;AAC7C,uBAAmB,KAAK,UAAU,WAAW;AAC7C,WAAO;AAAA,EACT;AAEA,MAAI,KAAK,SAAS,gBAAgB,KAAK,YAAY;AACjD,yBAAqB,KAAK,YAAY,WAAW;AACjD,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,SAAS,cAAc,MAAmB,aAA4C;AACpF,MAAI;AACF,UAAM,WAAW,KAAK,MAAM,KAAK,OAAO,EAAE;AAC1C,gBAAY,UAAU;AAAA,MACpB,oBAAoB;AAAA,QAClB,QAAQ;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,EACF,SAAS,QAAQ;AACf,gBAAY,UAAU;AAAA,MACpB,cAAc;AAAA,QACZ,QAAQ;AAAA,UACN,MAAM;AAAA,UACN,UAAU,CAAC,KAAK,GAAG;AAAA,QACrB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,mBAAmB,UAA2B,aAA4C;AACjG,cAAY,UAAU;AAAA,IACpB,uBAAuB;AAAA,MACrB,QAAQ,sBAAsB,QAAQ;AAAA,IACxC;AAAA,EACF;AACF;AAEA,SAAS,qBAAqB,YAAmC,aAA4C;AAC3G,QAAM,SAAmC;AAAA,IACvC,MAAM;AAAA,IACN,YAAY,CAAC;AAAA,IACb,UAAU,CAAC;AAAA,EACb;AACA,aAAW,QAAQ,CAAC,SAA8B;AAChD,QAAI,OAAO,YAAY;AACrB,YAAM,cAAc,sBAAsB,MAAM,OAAO;AACvD,aAAO,WAAW,KAAK,GAAG,IAAI;AAAA,QAC5B,MAAM;AAAA,QACN,UAAU,CAAC,KAAK,KAAK;AAAA,QACrB,aAAa,YAAY;AAAA,MAC3B;AACA,UAAI,YAAY,UAAU;AACxB,eAAO,UAAU,KAAK,KAAK,GAAG;AAAA,MAChC;AAAA,IACF;AAAA,EACF,CAAC;AACD,cAAY,UAAU;AAAA,IACpB,qCAAqC;AAAA,MACnC;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
