import { defineComponent as h, computed as m, createBlock as f, openBlock as t, unref as o, withCtx as l, createVNode as n, createElementBlock as d, Fragment as p, createElementVNode as s, createTextVNode as w, toDisplayString as C, createCommentVNode as U, renderList as B } from "vue";
import { ScalarPopover as z, ScalarButton as A, ScalarIcon as b, ScalarFloatingBackdrop as N } from "@scalar/components";
import V from "./ServerDropdownItem.vue.js";
const D = ["onClick"], $ = { class: "flex h-4 w-4 items-center justify-center" }, I = /* @__PURE__ */ h({
  __name: "ServerDropdown",
  props: {
    servers: {},
    server: {},
    target: {},
    layout: {}
  },
  emits: ["update:selectedServer", "update:variable", "addServer"],
  setup(a, { emit: S }) {
    const i = S, g = m(
      () => a.servers.map((e) => ({
        id: e.url,
        label: e.url ?? "Unknown server"
      }))
    ), k = m(() => a.server?.url?.endsWith("/") ? a.server.url.slice(0, -1) : a.server?.url || "");
    return (e, r) => (t(), f(o(z), {
      class: "max-h-[inherit] p-0 text-base",
      focus: "",
      offset: 0,
      placement: "bottom-start",
      resize: "",
      target: e.target,
      teleport: `#${e.target}`
    }, {
      popover: l(({ close: x }) => [
        s("div", {
          class: "custom-scroll flex max-h-[inherit] flex-col gap-1 border-t p-1",
          onClick: x
        }, [
          (t(!0), d(p, null, B(g.value, (u, v) => (t(), f(V, {
            key: u.id,
            server: e.server,
            serverOption: u,
            type: "request",
            "onUpdate:selectedServer": (c) => i("update:selectedServer", { index: v }),
            "onUpdate:variable": (c, y) => i("update:variable", { index: v, key: c, value: y })
          }, null, 8, ["server", "serverOption", "onUpdate:selectedServer", "onUpdate:variable"]))), 128)),
          e.layout !== "modal" ? (t(), d("button", {
            key: 0,
            class: "text-xxs hover:bg-b-2 flex cursor-pointer items-center gap-1.5 rounded p-1.75",
            type: "button",
            onClick: r[0] || (r[0] = (u) => i("addServer"))
          }, [
            s("div", $, [
              n(o(b), {
                icon: "Add",
                size: "sm"
              })
            ]),
            r[3] || (r[3] = s("span", null, "Add Server", -1))
          ])) : U("", !0)
        ], 8, D)
      ]),
      backdrop: l(() => [
        n(o(N), { class: "-top-(--scalar-address-bar-height) rounded-lg" })
      ]),
      default: l(() => [
        n(o(A), {
          class: "z-context-plus hover:bg-b-2 font-code text-c-2 ml-0.75 h-auto gap-0.75 rounded border px-1.5 text-base whitespace-nowrap",
          variant: "ghost"
        }, {
          default: l(() => [
            e.server ? (t(), d(p, { key: 0 }, [
              r[1] || (r[1] = s("span", { class: "sr-only" }, "Server:", -1)),
              w(" " + C(k.value), 1)
            ], 64)) : (t(), d(p, { key: 1 }, [
              r[2] || (r[2] = s("span", { class: "sr-only" }, "Add Server", -1)),
              n(o(b), {
                icon: "Add",
                size: "xs"
              })
            ], 64))
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["target", "teleport"]));
  }
});
export {
  I as default
};
