{
  "version": 3,
  "sources": ["../../../../../../src/httpsnippet-lite/esm/targets/php/http1/client.ts"],
  "sourcesContent": ["// @ts-nocheck\n/**\n * @description\n * HTTP code snippet generator for PHP using curl-ext.\n *\n * @author\n * @AhmadNassri\n *\n * for any questions or issues regarding the generated code snippet, please open an issue mentioning the author.\n */\nimport { CodeBuilder } from '../../../helpers/code-builder.js'\nimport { convertType, supportedMethods } from '../helpers.js'\n\nexport const http1 = {\n  info: {\n    key: 'http1',\n    title: 'HTTP v1',\n    link: 'http://php.net/manual/en/book.http.php',\n    description: 'PHP with pecl/http v1',\n  },\n  convert: (\n    { method, url, postData, queryObj, headersObj, cookiesObj },\n    options = {},\n  ) => {\n    const {\n      closingTag = false,\n      indent = '  ',\n      noTags = false,\n      shortTags = false,\n    } = options\n    const { push, blank, join } = new CodeBuilder({ indent })\n    if (!noTags) {\n      push(shortTags ? '<?' : '<?php')\n      blank()\n    }\n    if (!supportedMethods.includes(method.toUpperCase())) {\n      push(`HttpRequest::methodRegister('${method}');`)\n    }\n    push('$request = new HttpRequest();')\n    push(`$request->setUrl(${convertType(url)});`)\n    if (supportedMethods.includes(method.toUpperCase())) {\n      push(`$request->setMethod(HTTP_METH_${method.toUpperCase()});`)\n    } else {\n      push(\n        `$request->setMethod(HttpRequest::HTTP_METH_${method.toUpperCase()});`,\n      )\n    }\n    blank()\n    if (Object.keys(queryObj).length) {\n      push(`$request->setQueryData(${convertType(queryObj, indent)});`)\n      blank()\n    }\n    if (Object.keys(headersObj).length) {\n      push(`$request->setHeaders(${convertType(headersObj, indent)});`)\n      blank()\n    }\n    if (Object.keys(cookiesObj).length) {\n      push(`$request->setCookies(${convertType(cookiesObj, indent)});`)\n      blank()\n    }\n    switch (\n      postData === null || postData === void 0 ? void 0 : postData.mimeType\n    ) {\n      case 'application/x-www-form-urlencoded':\n        push(`$request->setContentType(${convertType(postData.mimeType)});`)\n        push(\n          `$request->setPostFields(${convertType(postData.paramsObj, indent)});`,\n        )\n        blank()\n        break\n      case 'application/json':\n        push(`$request->setContentType(${convertType(postData.mimeType)});`)\n        push(\n          `$request->setBody(json_encode(${convertType(postData.jsonObj, indent)}));`,\n        )\n        blank()\n        break\n      default:\n        if (postData === null || postData === void 0 ? void 0 : postData.text) {\n          push(`$request->setBody(${convertType(postData.text)});`)\n          blank()\n        }\n    }\n    push('try {')\n    push('$response = $request->send();', 1)\n    blank()\n    push('echo $response->getBody();', 1)\n    push('} catch (HttpException $ex) {')\n    push('echo $ex;', 1)\n    push('}')\n    if (!noTags && closingTag) {\n      blank()\n      push('?>')\n    }\n    return join()\n  },\n}\n"],
  "mappings": "AAUA,SAAS,mBAAmB;AAC5B,SAAS,aAAa,wBAAwB;AAEvC,MAAM,QAAQ;AAAA,EACnB,MAAM;AAAA,IACJ,KAAK;AAAA,IACL,OAAO;AAAA,IACP,MAAM;AAAA,IACN,aAAa;AAAA,EACf;AAAA,EACA,SAAS,CACP,EAAE,QAAQ,KAAK,UAAU,UAAU,YAAY,WAAW,GAC1D,UAAU,CAAC,MACR;AACH,UAAM;AAAA,MACJ,aAAa;AAAA,MACb,SAAS;AAAA,MACT,SAAS;AAAA,MACT,YAAY;AAAA,IACd,IAAI;AACJ,UAAM,EAAE,MAAM,OAAO,KAAK,IAAI,IAAI,YAAY,EAAE,OAAO,CAAC;AACxD,QAAI,CAAC,QAAQ;AACX,WAAK,YAAY,OAAO,OAAO;AAC/B,YAAM;AAAA,IACR;AACA,QAAI,CAAC,iBAAiB,SAAS,OAAO,YAAY,CAAC,GAAG;AACpD,WAAK,gCAAgC,MAAM,KAAK;AAAA,IAClD;AACA,SAAK,+BAA+B;AACpC,SAAK,oBAAoB,YAAY,GAAG,CAAC,IAAI;AAC7C,QAAI,iBAAiB,SAAS,OAAO,YAAY,CAAC,GAAG;AACnD,WAAK,iCAAiC,OAAO,YAAY,CAAC,IAAI;AAAA,IAChE,OAAO;AACL;AAAA,QACE,8CAA8C,OAAO,YAAY,CAAC;AAAA,MACpE;AAAA,IACF;AACA,UAAM;AACN,QAAI,OAAO,KAAK,QAAQ,EAAE,QAAQ;AAChC,WAAK,0BAA0B,YAAY,UAAU,MAAM,CAAC,IAAI;AAChE,YAAM;AAAA,IACR;AACA,QAAI,OAAO,KAAK,UAAU,EAAE,QAAQ;AAClC,WAAK,wBAAwB,YAAY,YAAY,MAAM,CAAC,IAAI;AAChE,YAAM;AAAA,IACR;AACA,QAAI,OAAO,KAAK,UAAU,EAAE,QAAQ;AAClC,WAAK,wBAAwB,YAAY,YAAY,MAAM,CAAC,IAAI;AAChE,YAAM;AAAA,IACR;AACA,YACE,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,UAC7D;AAAA,MACA,KAAK;AACH,aAAK,4BAA4B,YAAY,SAAS,QAAQ,CAAC,IAAI;AACnE;AAAA,UACE,2BAA2B,YAAY,SAAS,WAAW,MAAM,CAAC;AAAA,QACpE;AACA,cAAM;AACN;AAAA,MACF,KAAK;AACH,aAAK,4BAA4B,YAAY,SAAS,QAAQ,CAAC,IAAI;AACnE;AAAA,UACE,iCAAiC,YAAY,SAAS,SAAS,MAAM,CAAC;AAAA,QACxE;AACA,cAAM;AACN;AAAA,MACF;AACE,YAAI,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,MAAM;AACrE,eAAK,qBAAqB,YAAY,SAAS,IAAI,CAAC,IAAI;AACxD,gBAAM;AAAA,QACR;AAAA,IACJ;AACA,SAAK,OAAO;AACZ,SAAK,iCAAiC,CAAC;AACvC,UAAM;AACN,SAAK,8BAA8B,CAAC;AACpC,SAAK,+BAA+B;AACpC,SAAK,aAAa,CAAC;AACnB,SAAK,GAAG;AACR,QAAI,CAAC,UAAU,YAAY;AACzB,YAAM;AACN,WAAK,IAAI;AAAA,IACX;AACA,WAAO,KAAK;AAAA,EACd;AACF;",
  "names": []
}
