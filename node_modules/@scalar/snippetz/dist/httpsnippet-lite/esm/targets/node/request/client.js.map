{
  "version": 3,
  "sources": ["../../../../../../src/httpsnippet-lite/esm/targets/node/request/client.ts"],
  "sourcesContent": ["// @ts-nocheck\n/**\n * @description\n * HTTP code snippet generator for Node.js using Request.\n *\n * @author\n * @AhmadNassri\n *\n * for any questions or issues regarding the generated code snippet, please open an issue mentioning the author.\n */\nimport stringifyObject from 'stringify-object'\n\nimport { CodeBuilder } from '../../../helpers/code-builder.js'\n\nexport const request = {\n  info: {\n    key: 'request',\n    title: 'Request',\n    link: 'https://github.com/request/request',\n    description: 'Simplified HTTP request client',\n  },\n  convert: (\n    { method, url, queryObj, postData, headersObj, cookies },\n    options,\n  ) => {\n    const opts = {\n      indent: '  ',\n      ...options,\n    }\n    let includeFS = false\n    const { push, blank, join, unshift } = new CodeBuilder({\n      indent: opts.indent,\n    })\n    push(\"const request = require('request');\")\n    blank()\n    const reqOpts = {\n      method,\n      url,\n    }\n    if (Object.keys(queryObj).length) {\n      reqOpts.qs = queryObj\n    }\n    if (Object.keys(headersObj).length) {\n      reqOpts.headers = headersObj\n    }\n    switch (\n      postData === null || postData === void 0 ? void 0 : postData.mimeType\n    ) {\n      case 'application/x-www-form-urlencoded':\n        reqOpts.form = postData.paramsObj\n        break\n      case 'application/json':\n        if (postData.jsonObj) {\n          reqOpts.body = postData.jsonObj\n          reqOpts.json = true\n        }\n        break\n      case 'multipart/form-data':\n        if (!postData.params) {\n          break\n        }\n        reqOpts.formData = {}\n        postData.params.forEach((param) => {\n          if (!param.fileName && !param.fileName && !param.contentType) {\n            reqOpts.formData[param.name] = param.value\n            return\n          }\n          let attachment = {}\n          if (param.fileName) {\n            includeFS = true\n            attachment = {\n              value: `fs.createReadStream(${param.fileName})`,\n              options: {\n                filename: param.fileName,\n                contentType: param.contentType ? param.contentType : null,\n              },\n            }\n          } else if (param.value) {\n            attachment.value = param.value\n          }\n          reqOpts.formData[param.name] = attachment\n        })\n        break\n      default:\n        if (postData === null || postData === void 0 ? void 0 : postData.text) {\n          reqOpts.body = postData.text\n        }\n    }\n    // construct cookies argument\n    if (cookies.length) {\n      reqOpts.jar = 'JAR'\n      push('const jar = request.jar();')\n      cookies.forEach((cookie) => {\n        push(\n          `jar.setCookie(request.cookie('${encodeURIComponent(cookie.name)}=${encodeURIComponent(cookie.value)}'), '${url}');`,\n        )\n      })\n      blank()\n    }\n    if (includeFS) {\n      unshift(\"const fs = require('fs');\")\n    }\n    push(\n      `const options = ${stringifyObject(reqOpts, { indent: '  ', inlineCharacterLimit: 80 })};`,\n    )\n    blank()\n    push('request(options, function (error, response, body) {')\n    push('if (error) throw new Error(error);', 1)\n    blank()\n    push('console.log(body);', 1)\n    push('});')\n    return join()\n      .replace(\"'JAR'\", 'jar')\n      .replace(/'fs\\.createReadStream\\((.*)\\)'/, \"fs.createReadStream('$1')\")\n  },\n}\n"],
  "mappings": "AAUA,OAAO,qBAAqB;AAE5B,SAAS,mBAAmB;AAErB,MAAM,UAAU;AAAA,EACrB,MAAM;AAAA,IACJ,KAAK;AAAA,IACL,OAAO;AAAA,IACP,MAAM;AAAA,IACN,aAAa;AAAA,EACf;AAAA,EACA,SAAS,CACP,EAAE,QAAQ,KAAK,UAAU,UAAU,YAAY,QAAQ,GACvD,YACG;AACH,UAAM,OAAO;AAAA,MACX,QAAQ;AAAA,MACR,GAAG;AAAA,IACL;AACA,QAAI,YAAY;AAChB,UAAM,EAAE,MAAM,OAAO,MAAM,QAAQ,IAAI,IAAI,YAAY;AAAA,MACrD,QAAQ,KAAK;AAAA,IACf,CAAC;AACD,SAAK,qCAAqC;AAC1C,UAAM;AACN,UAAM,UAAU;AAAA,MACd;AAAA,MACA;AAAA,IACF;AACA,QAAI,OAAO,KAAK,QAAQ,EAAE,QAAQ;AAChC,cAAQ,KAAK;AAAA,IACf;AACA,QAAI,OAAO,KAAK,UAAU,EAAE,QAAQ;AAClC,cAAQ,UAAU;AAAA,IACpB;AACA,YACE,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,UAC7D;AAAA,MACA,KAAK;AACH,gBAAQ,OAAO,SAAS;AACxB;AAAA,MACF,KAAK;AACH,YAAI,SAAS,SAAS;AACpB,kBAAQ,OAAO,SAAS;AACxB,kBAAQ,OAAO;AAAA,QACjB;AACA;AAAA,MACF,KAAK;AACH,YAAI,CAAC,SAAS,QAAQ;AACpB;AAAA,QACF;AACA,gBAAQ,WAAW,CAAC;AACpB,iBAAS,OAAO,QAAQ,CAAC,UAAU;AACjC,cAAI,CAAC,MAAM,YAAY,CAAC,MAAM,YAAY,CAAC,MAAM,aAAa;AAC5D,oBAAQ,SAAS,MAAM,IAAI,IAAI,MAAM;AACrC;AAAA,UACF;AACA,cAAI,aAAa,CAAC;AAClB,cAAI,MAAM,UAAU;AAClB,wBAAY;AACZ,yBAAa;AAAA,cACX,OAAO,uBAAuB,MAAM,QAAQ;AAAA,cAC5C,SAAS;AAAA,gBACP,UAAU,MAAM;AAAA,gBAChB,aAAa,MAAM,cAAc,MAAM,cAAc;AAAA,cACvD;AAAA,YACF;AAAA,UACF,WAAW,MAAM,OAAO;AACtB,uBAAW,QAAQ,MAAM;AAAA,UAC3B;AACA,kBAAQ,SAAS,MAAM,IAAI,IAAI;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACE,YAAI,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,MAAM;AACrE,kBAAQ,OAAO,SAAS;AAAA,QAC1B;AAAA,IACJ;AAEA,QAAI,QAAQ,QAAQ;AAClB,cAAQ,MAAM;AACd,WAAK,4BAA4B;AACjC,cAAQ,QAAQ,CAAC,WAAW;AAC1B;AAAA,UACE,iCAAiC,mBAAmB,OAAO,IAAI,CAAC,IAAI,mBAAmB,OAAO,KAAK,CAAC,QAAQ,GAAG;AAAA,QACjH;AAAA,MACF,CAAC;AACD,YAAM;AAAA,IACR;AACA,QAAI,WAAW;AACb,cAAQ,2BAA2B;AAAA,IACrC;AACA;AAAA,MACE,mBAAmB,gBAAgB,SAAS,EAAE,QAAQ,MAAM,sBAAsB,GAAG,CAAC,CAAC;AAAA,IACzF;AACA,UAAM;AACN,SAAK,qDAAqD;AAC1D,SAAK,sCAAsC,CAAC;AAC5C,UAAM;AACN,SAAK,sBAAsB,CAAC;AAC5B,SAAK,KAAK;AACV,WAAO,KAAK,EACT,QAAQ,SAAS,KAAK,EACtB,QAAQ,kCAAkC,2BAA2B;AAAA,EAC1E;AACF;",
  "names": []
}
