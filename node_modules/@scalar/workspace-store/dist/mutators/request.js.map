{
  "version": 3,
  "sources": ["../../src/mutators/request.ts"],
  "sourcesContent": ["import type { HttpMethod } from '@scalar/helpers/http/http-methods'\n\nimport type { OpenApiDocument } from '@/schemas/v3.1/strict/openapi-document'\n\nexport type OperationIdentifier = {\n  path: string\n  method: Exclude<HttpMethod, 'head' | 'options'>\n}\n\n/**\n * Provides mutator functions for managing OpenAPI operations (requests) within a workspace store.\n * This module contains utilities for moving and deleting API operations while maintaining\n * document integrity and preventing conflicts.\n *\n * @param document - The OpenAPI document to operate on\n * @returns Object containing mutator functions for request operations\n */\nexport const requestMutators = (document?: OpenApiDocument) => {\n  /**\n   * Moves an operation from one path/method to another within the OpenAPI document.\n   * This function handles the relocation of API operations while preserving their configuration\n   * and preventing accidental overwrites of existing operations.\n   *\n   * @param source - The current location of the operation to move\n   * @param destination - The target location for the operation (path and/or method)\n   * @returns true if the operation was successfully moved, false otherwise\n   *\n   * @example\n   * // Move an operation to a completely new path and method\n   * moveOperation({\n   *   source: { path: '/old-endpoint', method: 'get' },\n   *   destination: { path: '/new-endpoint', method: 'post' }\n   * })\n   */\n  const moveOperation = ({\n    source,\n    destination,\n  }: {\n    source: OperationIdentifier\n    destination: OperationIdentifier\n  }) => {\n    if (!document || !document.paths) {\n      return false\n    }\n\n    const pathObject = document.paths[source.path]\n\n    if (!pathObject) {\n      return false\n    }\n\n    const operation = pathObject[source.method]\n\n    if (!operation) {\n      return false\n    }\n\n    const newPath = destination.path || source.path\n    const newMethod = destination.method || source.method\n\n    if (document.paths[newPath]?.[newMethod]) {\n      // If the new path and method already exist, we should not overwrite it.\n      console.warn(`Request already exists at ${newPath} with method ${newMethod}.`)\n      return false\n    }\n\n    // delete the request from the old location\n    delete pathObject[source.method]\n\n    if (!document.paths[newPath]) {\n      // If the new path does not exist, create it\n      document.paths[newPath] = {}\n    }\n\n    document.paths[newPath][newMethod] = operation\n    return true\n  }\n\n  /**\n   * Deletes an operation from the OpenAPI document at the specified path and method.\n   *\n   * @param path - The path of the operation to delete\n   * @param method - The HTTP method of the operation to delete\n   * @returns void - Returns early if document, path, or operation doesn't exist\n   *\n   * @example\n   * // Delete a GET operation from /users endpoint\n   * deleteRequest({ path: '/users', method: 'get' })\n   *\n   * @example\n   * // Delete a POST operation from /auth/login endpoint\n   * deleteRequest({ path: '/auth/login', method: 'post' })\n   */\n  const deleteRequest = ({ path, method }: OperationIdentifier) => {\n    if (!document) {\n      return false\n    }\n\n    const pathObject = document?.paths?.[path]\n\n    if (!pathObject) {\n      return false\n    }\n\n    const operation = pathObject[method]\n\n    if (!operation) {\n      return false\n    }\n\n    // Delete the request by slug\n    delete pathObject[method]\n    return true\n  }\n\n  return {\n    moveRequest: moveOperation,\n    deleteRequest,\n  }\n}\n"],
  "mappings": "AAiBO,MAAM,kBAAkB,CAAC,aAA+B;AAiB7D,QAAM,gBAAgB,CAAC;AAAA,IACrB;AAAA,IACA;AAAA,EACF,MAGM;AACJ,QAAI,CAAC,YAAY,CAAC,SAAS,OAAO;AAChC,aAAO;AAAA,IACT;AAEA,UAAM,aAAa,SAAS,MAAM,OAAO,IAAI;AAE7C,QAAI,CAAC,YAAY;AACf,aAAO;AAAA,IACT;AAEA,UAAM,YAAY,WAAW,OAAO,MAAM;AAE1C,QAAI,CAAC,WAAW;AACd,aAAO;AAAA,IACT;AAEA,UAAM,UAAU,YAAY,QAAQ,OAAO;AAC3C,UAAM,YAAY,YAAY,UAAU,OAAO;AAE/C,QAAI,SAAS,MAAM,OAAO,IAAI,SAAS,GAAG;AAExC,cAAQ,KAAK,6BAA6B,OAAO,gBAAgB,SAAS,GAAG;AAC7E,aAAO;AAAA,IACT;AAGA,WAAO,WAAW,OAAO,MAAM;AAE/B,QAAI,CAAC,SAAS,MAAM,OAAO,GAAG;AAE5B,eAAS,MAAM,OAAO,IAAI,CAAC;AAAA,IAC7B;AAEA,aAAS,MAAM,OAAO,EAAE,SAAS,IAAI;AACrC,WAAO;AAAA,EACT;AAiBA,QAAM,gBAAgB,CAAC,EAAE,MAAM,OAAO,MAA2B;AAC/D,QAAI,CAAC,UAAU;AACb,aAAO;AAAA,IACT;AAEA,UAAM,aAAa,UAAU,QAAQ,IAAI;AAEzC,QAAI,CAAC,YAAY;AACf,aAAO;AAAA,IACT;AAEA,UAAM,YAAY,WAAW,MAAM;AAEnC,QAAI,CAAC,WAAW;AACd,aAAO;AAAA,IACT;AAGA,WAAO,WAAW,MAAM;AACxB,WAAO;AAAA,EACT;AAEA,SAAO;AAAA,IACL,aAAa;AAAA,IACb;AAAA,EACF;AACF;",
  "names": []
}
