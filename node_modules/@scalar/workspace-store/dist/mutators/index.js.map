{
  "version": 3,
  "sources": ["../../src/mutators/index.ts"],
  "sourcesContent": ["/** biome-ignore-all lint/performance/noBarrelFile: Mutators entry point */\nimport type { WorkspaceStore } from '@/client'\nimport { cookieMutators } from '@/mutators/cookie'\nimport { getDocument } from '@/mutators/helpers'\nimport { requestMutators } from '@/mutators/request'\nimport { securitySchemeMutators } from '@/mutators/security-schemes'\nimport type { ServerObject } from '@/schemas/v3.1/strict/openapi-document'\n\n/**\n * Generates a set of mutators for managing OpenAPI document and workspace state.\n *\n * @deprecated use the individual mutators instead, this will be removed after we move fully to the new store\n *\n * @param store - The workspace store containing all documents and workspace-level data\n * @returns An object with mutators for the workspace, the active document, and any named document\n */\nexport function generateClientMutators(store: WorkspaceStore) {\n  /**\n   * Provides mutator functions for managing an array of OpenAPI ServerObject entries.\n   *\n   * @param target - The array of ServerObject to mutate. If not provided, mutators will be no-ops.\n   * @returns An object with addServer and deleteServer methods.\n   */\n  const serverMutators = (target?: ServerObject[]) => {\n    /**\n     * Adds a new ServerObject to the target array.\n     * @param server - The ServerObject to add.\n     * @returns true if the server was added, false if target is undefined.\n     */\n    const addServer = (server: ServerObject): boolean => {\n      if (!target) {\n        return false\n      }\n      target.push(server)\n      return true\n    }\n\n    /**\n     * Deletes a ServerObject at the specified index from the target array.\n     * @param index - The index of the server to delete.\n     * @returns true if the server was deleted, false if target is undefined.\n     */\n    const deleteServer = (url: string): boolean => {\n      if (!target) {\n        return false\n      }\n      const newTarget = [...target.filter((it) => it.url !== url)]\n      target.splice(0, target.length)\n      target.push(...newTarget)\n      return true\n    }\n\n    return {\n      addServer,\n      deleteServer,\n    }\n  }\n\n  /**\n   * Returns mutators for a specific document by name.\n   *\n   * @param documentName - The name of the document to get mutators for\n   * @returns An object containing mutators for requests, request examples, security schemes, environments, and cookies\n   */\n  const documentMutators = (documentName: string) => {\n    const document = getDocument(store, documentName)\n\n    if (document) {\n      // Make sure the document has a servers array\n      if (!document.servers) {\n        document.servers = []\n      }\n\n      // Make sure the document has the securitySchema object\n      if (!document.components) {\n        document.components = {}\n      }\n\n      if (!document.components.securitySchemes) {\n        document.components.securitySchemes = {}\n      }\n    }\n\n    return {\n      requestMutators: requestMutators(document),\n      securitySchemeMutators: securitySchemeMutators(document?.components?.securitySchemes),\n      cookieMutators: cookieMutators(document),\n      serverMutators: serverMutators(document?.servers),\n    }\n  }\n\n  /**\n   * Returns mutators for the workspace-level configuration.\n   *\n   * @returns An object containing mutators for environments and cookies at the workspace level\n   */\n  const workspaceMutators = () => {\n    const workspace = store.workspace\n\n    // Make sure the workspace has a servers array\n    if (!workspace['x-scalar-client-config-servers']) {\n      workspace['x-scalar-client-config-servers'] = []\n    }\n\n    // Make sure the workspace has the securitySchema object\n    if (!store.workspace['x-scalar-client-config-security-schemes']) {\n      store.workspace['x-scalar-client-config-security-schemes'] = {}\n    }\n\n    return {\n      cookieMutators: cookieMutators(store.workspace),\n      serverMutators: serverMutators(store.workspace['x-scalar-client-config-servers']),\n      securitySchemeMutators: securitySchemeMutators(store.workspace['x-scalar-client-config-security-schemes']),\n    }\n  }\n\n  return {\n    /**\n     * Returns mutators for the workspace-level configuration.\n     */\n    workspace: () => workspaceMutators(),\n    /**\n     * Returns mutators for the currently active document.\n     * Falls back to the first document if no active document is set.\n     */\n    active: () =>\n      documentMutators(store.workspace['x-scalar-active-document'] ?? Object.keys(store.workspace.documents)[0] ?? ''),\n    /**\n     * Returns mutators for a specific document by name.\n     *\n     * @param name - The name of the document\n     */\n    doc: (name: string) => documentMutators(name),\n  }\n}\n\nexport {\n  type AuthMeta,\n  deleteSecurityScheme,\n  updateSecurityScheme,\n  updateSelectedAuthTab,\n  updateSelectedScopes,\n  updateSelectedSecuritySchemes,\n} from './auth'\nexport { toggleDocumentSecurity } from './document'\nexport {\n  upsertEnvironment,\n  upsertEnvironmentVariable,\n} from './environment'\nexport {\n  type OperationExampleMeta,\n  type OperationMeta,\n  addOperationParameter,\n  addOperationRequestBodyFormRow,\n  deleteAllOperationParameters,\n  deleteOperationParameter,\n  deleteOperationRequestBodyFormRow,\n  updateOperationMethodDraft as updateOperationMethod,\n  updateOperationParameter,\n  updateOperationPathDraft as updateOperationPath,\n  updateOperationRequestBodyContentType,\n  updateOperationRequestBodyExample,\n  updateOperationRequestBodyFormRow,\n  updateOperationSummary,\n} from './operation'\nexport {\n  addServer,\n  deleteServer,\n  updateSelectedServer,\n  updateServer,\n  updateServerVariables,\n} from './server'\n"],
  "mappings": "AAEA,SAAS,sBAAsB;AAC/B,SAAS,mBAAmB;AAC5B,SAAS,uBAAuB;AAChC,SAAS,8BAA8B;AAWhC,SAAS,uBAAuB,OAAuB;AAO5D,QAAM,iBAAiB,CAAC,WAA4B;AAMlD,UAAMA,aAAY,CAAC,WAAkC;AACnD,UAAI,CAAC,QAAQ;AACX,eAAO;AAAA,MACT;AACA,aAAO,KAAK,MAAM;AAClB,aAAO;AAAA,IACT;AAOA,UAAMC,gBAAe,CAAC,QAAyB;AAC7C,UAAI,CAAC,QAAQ;AACX,eAAO;AAAA,MACT;AACA,YAAM,YAAY,CAAC,GAAG,OAAO,OAAO,CAAC,OAAO,GAAG,QAAQ,GAAG,CAAC;AAC3D,aAAO,OAAO,GAAG,OAAO,MAAM;AAC9B,aAAO,KAAK,GAAG,SAAS;AACxB,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,MACL,WAAAD;AAAA,MACA,cAAAC;AAAA,IACF;AAAA,EACF;AAQA,QAAM,mBAAmB,CAAC,iBAAyB;AACjD,UAAM,WAAW,YAAY,OAAO,YAAY;AAEhD,QAAI,UAAU;AAEZ,UAAI,CAAC,SAAS,SAAS;AACrB,iBAAS,UAAU,CAAC;AAAA,MACtB;AAGA,UAAI,CAAC,SAAS,YAAY;AACxB,iBAAS,aAAa,CAAC;AAAA,MACzB;AAEA,UAAI,CAAC,SAAS,WAAW,iBAAiB;AACxC,iBAAS,WAAW,kBAAkB,CAAC;AAAA,MACzC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,iBAAiB,gBAAgB,QAAQ;AAAA,MACzC,wBAAwB,uBAAuB,UAAU,YAAY,eAAe;AAAA,MACpF,gBAAgB,eAAe,QAAQ;AAAA,MACvC,gBAAgB,eAAe,UAAU,OAAO;AAAA,IAClD;AAAA,EACF;AAOA,QAAM,oBAAoB,MAAM;AAC9B,UAAM,YAAY,MAAM;AAGxB,QAAI,CAAC,UAAU,gCAAgC,GAAG;AAChD,gBAAU,gCAAgC,IAAI,CAAC;AAAA,IACjD;AAGA,QAAI,CAAC,MAAM,UAAU,yCAAyC,GAAG;AAC/D,YAAM,UAAU,yCAAyC,IAAI,CAAC;AAAA,IAChE;AAEA,WAAO;AAAA,MACL,gBAAgB,eAAe,MAAM,SAAS;AAAA,MAC9C,gBAAgB,eAAe,MAAM,UAAU,gCAAgC,CAAC;AAAA,MAChF,wBAAwB,uBAAuB,MAAM,UAAU,yCAAyC,CAAC;AAAA,IAC3G;AAAA,EACF;AAEA,SAAO;AAAA;AAAA;AAAA;AAAA,IAIL,WAAW,MAAM,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,IAKnC,QAAQ,MACN,iBAAiB,MAAM,UAAU,0BAA0B,KAAK,OAAO,KAAK,MAAM,UAAU,SAAS,EAAE,CAAC,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMjH,KAAK,CAAC,SAAiB,iBAAiB,IAAI;AAAA,EAC9C;AACF;AAEA;AAAA,EAEE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,SAAS,8BAA8B;AACvC;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EAGE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAC8B;AAAA,EAC9B;AAAA,EAC4B;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;",
  "names": ["addServer", "deleteServer"]
}
